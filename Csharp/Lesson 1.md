# Тема урока: Типы в C# 
- Class Object
- class 
- struct 
- class vs struct
- anonymous type and dynamic 
- ref & out 
- Console class 
- Type casting 
- switch expression 
- null coalescing and null conditional operators 


# Class Object 

Тип `object` - это базовый тип для всех типов в C#. Он является суперклассом для всех классов и структур в C#. Это означает, что любой тип в C# может быть приведен к типу `object`.

В нем есть 4 метода:
- `GetType()` - возвращает тип объекта
- `GetHashCode()` - возвращает хэш-код объекта
- `ToString()` - возвращает строковое представление объекта
- `Equals()` - сравнивает два объекта на равенство

`GetType()` - нужен для того чтобы мы могли реализовать рефлексию и использовать все данные которые у нас есть в классе. 

`GetHashCode()` - нужен для того чтобы мы могли использовать хэш-таблицы и другие структуры данных, которые требуют уникального идентификатора для каждого объекта.

`ToString()` - нужен для того чтобы мы могли получить строковое представление объекта. Например, если у нас есть объект `Person`, то мы можем переопределить метод `ToString()`, чтобы он возвращал строку "Имя: {Имя}, Возраст: {Возраст}".

`Equals()` - нужен для того чтобы мы могли сравнивать два объекта на равенство. Например, если у нас есть два объекта `Person`, то мы можем переопределить метод `Equals()`, чтобы он сравнивал их по имени и возрасту.


## class 

Все классы в C# наследуются от класса `object`. Это означает, что все классы имеют доступ к методам и свойствам класса `object`. 

Есть несколько вариантов создания свойств(property): 
- `get` и `set` - это стандартные свойства, которые позволяют получать и устанавливать значение свойства.
- `get` - это свойство только для чтения, которое позволяет только получать значение свойства.
- `set` - это свойство только для записи, которое позволяет только устанавливать значение свойства.
- `private set` - это свойство, которое можно устанавливать только внутри класса.
- `init` - это свойство, которое можно устанавливать только при создании объекта.
- `readonly` - это свойство, которое можно устанавливать только при создании объекта и нельзя изменять после этого.

`readonly` - это ключевое слово, которое создает поле, которое можно устанавливать только при создании объекта и нельзя изменять после этого. Это позволяет создавать неизменяемые объекты, которые не могут быть изменены после создания.

`const` - это ключевое слово, которое создает константу, которая не может быть изменена после создания. Это позволяет создавать неизменяемые объекты, которые не могут быть изменены после создания. К нему можно обращаться только от имени самого класса. 

`static` - это ключевое слово, которое создает статическое поле, которое принадлежит классу, а не объекту. Это позволяет создавать статические поля, которые могут быть доступны без создания объекта класса.

с версии .NET 8 вы можете сразу прописывать конструктор для класса при его объявлении. Например: 

```csharp

public class Person(string name, int age)
{
    public string Name { get; set; } = name;
    public int Age { get; set; } = age;
}
```

у классов есть финализаторы, но нет деструкторов. 

Финализаторы - это методы, которые вызываются перед уничтожением объекта. Они используются для освобождения ресурсов, которые были заняты объектом. Например, если у вас есть объект, который использует файл, то вы можете использовать финализатор, чтобы закрыть файл перед уничтожением объекта.

```csharp 

public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }

    ~Person()
    {
        // Финализатор
        Console.WriteLine("Объект Person уничтожен");
    }
}

```

Хоть он выглядит как деструктор, в С# деструкторов нет, так как освоюождение памяти выполняется автоматически. В свою очередь финализаторы выполняют действия вроде закрытия файлов, потоков и т.д.  

## struct

Структуры - это типы значений, которые хранятся в стеке. Они используются для хранения небольших объемов данных. Структуры не поддерживают наследование, но могут реализовывать интерфейсы. 

Структуры могут содержать поля, свойства, методы и события. Они могут иметь конструкторы. Структуры не могут быть абстрактными или виртуальными. Они не могут наследоватьсяч, но могут реализовывать интерфейсы(объясню в будущем).


## class vs struct

# Сравнение структур и классов в C#

| Характеристика                    | `struct` (структура)                            | `class` (класс)                                |
|----------------------------------|--------------------------------------------------|------------------------------------------------|
| Тип хранения                     | Значимый тип (value type)                        | Ссылочный тип (reference type)                 |
| Место хранения                   | В стеке (обычно)                                 | В куче (heap)                                  |
| Поведение при передаче в метод  | Копируется (по значению)                        | Передаётся по ссылке                           |
| Наследование                     | Не может наследовать от других структур или классов | Может наследовать и быть базовым классом     |
| Реализация интерфейсов          | Да                                               | Да                                             |
| Поддержка конструктора по умолчанию | До C# 10 — неявный, нельзя переопределить<br>С C# 10 — можно явно определить | Есть всегда и можно явно определить          |
| Поля без инициализации          | До C# 10 — обязаны инициализироваться в конструкторе | Можно не инициализировать                     |
| null-допустимость (`nullable`)  | С C# 2.0 — `Nullable<struct>`                   | Всегда можно присвоить `null`                 |
| Производительность               | Выше при работе с малыми типами                 | Ниже из-за аллокации в куче                   |
| Использование по умолчанию      | Для маленьких и неизменяемых объектов           | Для сложных, изменяемых объектов              |
| Пример определения               | `struct MyStruct { int X; }`                   | `class MyClass { int X; }`                    |



