# Тема урока: Введение в C\#

- История языка C#
- Описание языка C#
- Компоненты языка и среда выполнения
- Рефлекторы и Дотфускаторы
- Примитивные типы данных
- Литералы
- Переменные и константы
- - Анонимные и динамические типы
- Консоль
- nameof

# [Ссылка на план обучения](https://materials.itstep.org/content/a779d77b-0652-4766-9984-ee5c40e7c66b/ru)

## История языка C#

`C#` - это продукт компании Microsoft, который был разработан в 2000 году под руководством Андерса Хейлсберга. Он был создан как язык программирования общего назначения, который сочетает в себе элементы языков C и C++, а также функциональные возможности языка Java.

C# был разработан для работы в среде .NET, которая предоставляет платформу для разработки и выполнения приложений. Язык C# стал частью .NET Framework, который был выпущен в 2002 году. До сегодняшнего дня .NET Framework уже переименован на .NET Core, а актуальная версия языка C# - это C# 14.0.

Сам по себе .NET Core обновляется каждый год, обычно в ноябре. Его версии чередуются `STS`(Short term support) и `LTS`(Long term support).

## Описание языка C#

Объектно-ориентированный, строго типизированный, высокоуровневый, компилируемый язык программирования общего назначения.

## Компоненты языка и среда выполнения

У самого `C#` есть компилятор, который называется `Roslyn`. Он компилирует код в промежуточный язык `IL`(Intermediate Language), который затем выполняется средой выполнения `CLR`(Common Language Runtime).

`CLR` - это часть .NET, которая отвечает за выполнение кода. Она управляет памятью, выполняет сборку мусора и обеспечивает безопасность выполнения кода.

Перед тем как объяснить вам как он работает, давайте разберем зачем он нужен.

`.NET` - это платформа, которая позволяет разработчикам создавать приложения для Windows, Linux и macOS. Она предоставляет набор библиотек и инструментов для разработки, а также среду выполнения для выполнения кода.
`.NET` поддерживает несколько языков программирования, включая C#, VB.NET и F#. Это позволяет разработчикам использовать язык, который им больше нравится, и легко интегрировать код на разных языках в одном приложении. Как раз таки именно `IL` позволяет сделать так чтобы код на разных языках мог работать вместе.

Плюсы `.NET`:

- Кроссплатформенность: приложения могут работать на Windows, Linux и macOS.
- Безопасность: `CLR` обеспечивает безопасность выполнения кода, что позволяет защитить систему от вредоносных программ.
- Управление памятью: `CLR` управляет памятью и выполняет сборку мусора, что позволяет избежать утечек памяти.
- Поддержка нескольких языков: разработчики могут использовать язык, который им больше нравится, и легко интегрировать код на разных языках в одном приложении.
- Большое количество библиотек: .NET предоставляет множество библиотек для работы с различными задачами, такими как работа с базами данных, сетевое программирование и т.д.

## Примитивные типы данных

В `C#` типы данных делятся на два типа:

- Значимые типы (value types)
- Ссылочные типы (reference types)

Дело в том, что в `C#` типы данных реализованы как классы или как структуры.

Все значимые типы данных реализованы как структуры, а ссылочные типы - как классы.

Самих категорий типов данных много, например:

- Классы (class)
- Структуры (struct)
- Интерфейсы (interface)
- Записи (record)
- Перечисления (enum)
- Делегаты (Delegate)
- События (event)

Из всех этих категорий значимые типы данных - это только структуры и перечисления.

**Важно!**

- Значимые типы данных хранятся в стеке (stack), а ссылочные - в куче (heap).
- Значимые типы данных копируются по значению, а ссылочные - по ссылке.

### Значимые типы данных

![](https://i.sstatic.net/dBmFr.png)

Из значимых типов для вам незнаком только `decimal`.
`decimal` - это тип данных с фиксированной точкой, который используется для представления чисел с плавающей запятой. Он имеет большую точность, чем `float` и `double`, и используется в финансовых приложениях, где важна точность вычислений.

К примеру при делении 1 на 3 в `float` и `double` вы получите 0.3333333, а в `decimal` - 0.3333333333333333. `decimal` занимает 128 бит (16 байт)

## CLR (Common Language Runtime)

`CLR` - это та самая виртуальная машина, которая выполняет код. Она управляет памятью, выполняет сборку мусора и обеспечивает безопасность выполнения кода.

В нее входит:

- JIT-компилятор (Just-In-Time compiler) - компилирует IL-код в машинный код во время выполнения программы.
- Глобальная память (Global memory) - управляет памятью и выполняет сборку мусора.
- Управление потоками (Thread management) - управляет потоками выполнения кода.
- Управление исключениями (Exception management) - обрабатывает исключения и ошибки выполнения кода.
- Безопасность (Security) - обеспечивает безопасность выполнения кода, что позволяет защитить систему от вредоносных программ.

## JIT (Just-In-Time compiler)

`JIT` - это компилятор, который компилирует IL-код в машинный код во время выполнения программы. Он позволяет выполнять код на любой платформе, на которой установлен .NET, без необходимости перекомпиляции. Его разница между обычным компилятором в том, что он может модульно запускать код и делать компиляцию по пути. Более того он не будет перекомпилировать код, который уже был скомпилирован.

## CTS (Common Type System)

`CTS` - это система типов, которая определяет, как типы данных должны быть представлены в .NET. Она обеспечивает совместимость между различными языками программирования и позволяет разработчикам использовать типы данных, которые были определены в других языках.

## BCL (Base Class Library)

Он раньше назывался `FCL` (Framework Class Library) - это набор библиотек, которые предоставляют функциональность для работы с различными задачами, такими как работа с базами данных, сетевое программирование и т.д.

## CLS (Common Language Specification)

Это спецификация, которая определяет набор правил и стандартов для языков программирования, которые работают с .NET. Она обеспечивает совместимость между различными языками программирования и позволяет разработчикам использовать типы данных, которые были определены в других языках.

## Рефлекторы и Дотфускаторы

Рефлектор - от слова рекфлексия(копаться в себе). Это инструмент, который позволяет разработчикам исследовать и анализировать код, который был скомпилирован в IL. Он позволяет просматривать структуру классов, методы, свойства и другие элементы кода.

Мы уже увидели его в `Rider`. При установке `Visual Studio` устанавливается отдельно `DevTools` в котором есть инстурмент `ildasm`. Для его запуска нужно открыть `Developer PowerShell` и ввести `ildasm`.

Дотфускатор - это любая программа, которая позволяет защитить код от реверс-инжиниринга. Он делает это путем изменения структуры кода, что делает его трудным для понимания и анализа. По факту это обфускация кода.

## Литералы

Из нового что вы еще не знаете - это новые строковые типы.

1. Целочисленные литералы
   - Десятичные литералы (по умолчанию)
   - Двоичные литералы (0b)
   - Шестнадцатеричные литералы (0x)
   - Восьмеричные литералы (0o)
   - Литералы с суффиксами (u, l, ul)
2. Вещественные литералы
   - Литералы с суффиксами (f, d, m)
3. Строковые литералы
   - Вербатим-строки (@)
   - Интерполированные строки ($)
   - Экранированные строки (\)
   - Сырые строки ("""""")
4. Null-литерал
5. Литерал default. В основном используется для знчимых типов данных и придает им
   значение по умолчанию. Например, для `int` это 0, для `bool` - false, для `string` - null.
6. Литерал nameof. Это литерал, который возвращает имя переменной, типа или члена. Он используется для получения имени переменной в виде строки без необходимости использовать строковые литералы.

```csharp

int age = 23;
string name = "Elvin";

Console.WriteLine("Hi, my name is " + name + " and I am " + age + " years old.");
Console.WriteLine($"Hi, my name is {name} and I am {age} years old."); // string interpolation

Console.WriteLine(
    """
    Hi, my name is Elvin
    and I am 23 years old.
    """);


```

## Переменные и константы

Все точно также, но ключевое слово `new` не создает место в памяти, а просто вызывает конструктор. То есть если написать `new int` он просто создаст объект. Нет никакой речи о `heap`.

Есть также `dynamic` и `var`.

`var` - это аналог `auto` в `C++`. Он позволяет компилятору определить тип переменной на основе присвоенного значения.

В свою очередь `dynamic` - это динамический тип, который можем во время runtime менять тип переменной. То есть он может быть чем угодно.